# ReliefNet - Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RELIEFNET ANDROID APP                       â”‚
â”‚                         (Kotlin + Jetpack Compose)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                       â”‚
        â–¼                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI LAYER        â”‚                                 â”‚  REAL-TIME      â”‚
â”‚  (Composables)    â”‚                                 â”‚  (Socket.IO)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ LoginScreen     â”‚                                 â”‚ â€¢ Chat          â”‚
â”‚ â€¢ HomeScreen      â”‚                                 â”‚ â€¢ Video Calls   â”‚
â”‚ â€¢ BookingScreen   â”‚                                 â”‚ â€¢ Notifications â”‚
â”‚ â€¢ DoctorProfile   â”‚                                 â”‚ â€¢ Live Updates  â”‚
â”‚ â€¢ ChatScreen      â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
        â”‚                                                     â”‚
        â”‚                                                     â”‚
        â–¼                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  VIEWMODEL        â”‚                                         â”‚
â”‚  (State Mgmt)     â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
        â”‚                                                     â”‚
        â”‚                                                     â”‚
        â–¼                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚              REPOSITORY LAYER                          â”‚     â”‚
â”‚         (ReliefNetRepository.kt)                       â”‚     â”‚
â”‚                                                        â”‚     â”‚
â”‚  â€¢ Business Logic                                     â”‚     â”‚
â”‚  â€¢ Data Transformation                                â”‚     â”‚
â”‚  â€¢ Error Handling                                     â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                                     â”‚
        â”‚                                                     â”‚
        â–¼                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         NETWORK LAYER                   â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â€¢ RetrofitClient (HTTP)                â”‚                   â”‚
â”‚  â€¢ SocketManager (WebSocket) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â€¢ ApiService (Endpoints)               â”‚                   
â”‚  â€¢ ApiConfig (URLs)                     â”‚                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
        â”‚                                                     
        â”‚ HTTP/HTTPS + WebSocket                             
        â–¼                                                     
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        â”‚                    INTERNET                        
        â–¼                                                     
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        â”‚                                                     
        â–¼                                                     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NODE.JS BACKEND SERVER                      â”‚
â”‚              (Express.js + Socket.IO)                    â”‚
â”‚              Port: 5000                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  REST API Endpoints                                     â”‚
â”‚  â”œâ”€â”€ /api/register                                      â”‚
â”‚  â”œâ”€â”€ /api/login                                         â”‚
â”‚  â”œâ”€â”€ /api/doctors                                       â”‚
â”‚  â”œâ”€â”€ /api/sessions                                      â”‚
â”‚  â””â”€â”€ /api/notifications                                 â”‚
â”‚                                                          â”‚
â”‚  Socket.IO Events                                       â”‚
â”‚  â”œâ”€â”€ connection                                         â”‚
â”‚  â”œâ”€â”€ register                                           â”‚
â”‚  â”œâ”€â”€ call:initiate                                      â”‚
â”‚  â”œâ”€â”€ call:offer                                         â”‚
â”‚  â””â”€â”€ call:answer                                        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                     
        â”‚                                                     
        â–¼                                                     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MONGODB ATLAS                               â”‚
â”‚              (Cloud Database)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Collections:                                           â”‚
â”‚  â”œâ”€â”€ users (Patients)                                   â”‚
â”‚  â”œâ”€â”€ doctors                                            â”‚
â”‚  â”œâ”€â”€ sessions (Bookings)                                â”‚
â”‚  â”œâ”€â”€ notifications                                      â”‚
â”‚  â””â”€â”€ payments                                           â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Example: Login

```
1. User enters email/password
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
2. LoginScreen (Composable)
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
3. ViewModel calls Repository
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
4. Repository.loginPatient()
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
5. RetrofitClient sends HTTP POST
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
6. Node.js /api/login endpoint
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
7. MongoDB query for user
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
8. bcrypt password verification
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
9. JWT token generated
   â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                         â–¼
10. Response sent back
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                          â–¼
11. Repository receives AuthResponse
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                          â–¼
12. ViewModel updates state
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                          â–¼
13. UI updates (navigate to home)
```

---

## ğŸ”„ Data Flow Example: Real-time Chat

```
User A sends message
        â”‚
        â–¼
SocketManager.emit("message:send")
        â”‚
        â–¼
Socket.IO Client â”€â”€â”€â”€â”€â”€â–º  Node.js Socket.IO Server
                                    â”‚
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
                    â–¼                             â–¼
            Save to MongoDB              Find User B's socket
                    â”‚                             â”‚
                    â”‚                             â–¼
                    â”‚              socket.emit("message:received")
                    â”‚                             â”‚
                    â”‚                             â”‚
                    â”‚                             â–¼
                    â”‚                     User B's Socket.IO Client
                    â”‚                             â”‚
                    â”‚                             â–¼
                    â”‚                   User B receives message
                    â”‚                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± File Structure

```
ReliefNet/
â”‚
â”œâ”€â”€ server/                          # Backend (Node.js)
â”‚   â”œâ”€â”€ server.js                    # Main server file
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ Doctor.js
â”‚   â”‚   â”œâ”€â”€ Patient.js
â”‚   â”‚   â””â”€â”€ Session.js
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ Reliefnet-android/               # Frontend (Android)
    â””â”€â”€ app/src/main/java/com/sentrive/reliefnet/
        â”‚
        â”œâ”€â”€ network/                 # ğŸŒ Network Layer
        â”‚   â”œâ”€â”€ ApiConfig.kt         # URLs & Endpoints
        â”‚   â”œâ”€â”€ ApiService.kt        # Retrofit Interface
        â”‚   â”œâ”€â”€ RetrofitClient.kt    # HTTP Client
        â”‚   â”œâ”€â”€ SocketManager.kt     # Socket.IO Client
        â”‚   â””â”€â”€ models/
        â”‚       â””â”€â”€ ApiModels.kt     # Data Classes
        â”‚
        â”œâ”€â”€ repository/              # ğŸ’¼ Business Logic
        â”‚   â””â”€â”€ ReliefNetRepository.kt
        â”‚
        â”œâ”€â”€ userInterface/           # ğŸ¨ UI Screens
        â”‚   â”œâ”€â”€ loginScreen.kt
        â”‚   â”œâ”€â”€ HomeScreen.kt
        â”‚   â”œâ”€â”€ BookingScreen.kt
        â”‚   â”œâ”€â”€ DoctorProfile.kt
        â”‚   â””â”€â”€ DoctorChatScreen.kt
        â”‚
        â”œâ”€â”€ examples/                # ğŸ“š Usage Examples
        â”‚   â””â”€â”€ ExampleApiUsage.kt
        â”‚
        â””â”€â”€ testing/                 # ğŸ§ª Testing
            â””â”€â”€ ApiTestScreen.kt
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Start     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Opens App â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Has Token?  â”‚
   â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
      â”‚      â”‚
     Yes    No
      â”‚      â”‚
      â”‚      â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚Login Screenâ”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚ Enter Credentialsâ”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚POST /api/login      â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚Server validates â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚Returns JWT Tokenâ”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚ Save Token      â”‚
      â”‚  â”‚ (SharedPrefs)   â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Home Screenâ”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ All API calls use   â”‚
   â”‚ Authorization:      â”‚
   â”‚ Bearer <token>      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Integration Points

### 1. Login/Register Screens
- Replace mock auth with `ReliefNetRepository`
- Save JWT token
- Navigate on success

### 2. Doctor Listing
- Fetch from `/api/doctors`
- Filter by specialty, location
- Display in LazyColumn

### 3. Booking System
- Create session via `/api/sessions`
- Display user's bookings
- Allow cancellation

### 4. Chat & Calls
- Connect to Socket.IO
- Register user
- Handle real-time events

### 5. Profile Management
- Upload photos via `/api/upload`
- Update user data
- Display in UI

---

**This architecture is production-ready and scalable! ğŸš€**
